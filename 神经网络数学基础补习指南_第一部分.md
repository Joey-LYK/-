# 神经网络数学基础补习指南 - 第一部分
## 函数与导数基础

### 1. 什么是函数？

**简单理解：** 函数就像一个"机器"，输入一个数，输出另一个数。

**例子：** f(x) = 2x + 1
- 输入x = 3，输出f(3) = 2×3 + 1 = 7
- 输入x = 0，输出f(0) = 2×0 + 1 = 1

**练习：**
1. f(x) = 3x + 2，求f(4)
2. g(x) = x² - 1，求g(3)

**答案：**
1. f(4) = 3×4 + 2 = 14
2. g(3) = 3² - 1 = 8

### 2. 导数的概念

**简单理解：** 导数告诉我们函数在某个点"变化有多快"。

**生活中的例子：**
- 速度 = 位置对时间的导数
- 加速度 = 速度对时间的导数

**数学定义：** f'(x) = lim(h→0) [f(x+h) - f(x)] / h

**推导过程详解：**

让我们用几个例子来理解这个定义：

**例子1：线性函数 f(x) = 2x + 1**
1. f(x+h) = 2(x+h) + 1 = 2x + 2h + 1
2. f(x) = 2x + 1
3. f(x+h) - f(x) = (2x + 2h + 1) - (2x + 1) = 2h
4. [f(x+h) - f(x)] / h = 2h / h = 2
5. lim(h→0) 2 = 2
6. 所以 f'(x) = 2

**例子2：二次函数 f(x) = x²**
1. f(x+h) = (x+h)² = x² + 2xh + h²
2. f(x) = x²
3. f(x+h) - f(x) = (x² + 2xh + h²) - x² = 2xh + h²
4. [f(x+h) - f(x)] / h = (2xh + h²) / h = 2x + h
5. lim(h→0) (2x + h) = 2x
6. 所以 f'(x) = 2x

**例子3：常数函数 f(x) = c**
1. f(x+h) = c
2. f(x) = c
3. f(x+h) - f(x) = c - c = 0
4. [f(x+h) - f(x)] / h = 0 / h = 0
5. lim(h→0) 0 = 0
6. 所以 f'(x) = 0

**练习：**
1. f(x) = 2x + 1，求f'(x)
2. g(x) = x²，求g'(x)

**答案：**
1. f'(x) = 2
2. g'(x) = 2x

### 3. 常见函数的导数

#### 3.1 基础函数
**线性函数：** f(x) = ax + b → f'(x) = a
**二次函数：** f(x) = x² → f'(x) = 2x
**常数函数：** f(x) = c → f'(x) = 0
**幂函数：** f(x) = xⁿ → f'(x) = nxⁿ⁻¹

#### 3.2 指数函数与对数函数

**指数函数 f(x) = eˣ 的导数推导：**
1. f(x+h) = eˣ⁺ʰ = eˣ·eʰ
2. f(x) = eˣ
3. f(x+h) - f(x) = eˣ·eʰ - eˣ = eˣ(eʰ - 1)
4. [f(x+h) - f(x)] / h = eˣ(eʰ - 1) / h
5. 当h→0时，eʰ ≈ 1 + h + h²/2! + ...
6. 所以 (eʰ - 1) / h ≈ (1 + h - 1) / h = 1
7. 因此 f'(x) = eˣ

**指数函数 f(x) = aˣ 的导数推导：**
1. aˣ = eˣˡⁿ⁽ᵃ⁾
2. 使用链式法则：f'(x) = eˣˡⁿ⁽ᵃ⁾ · ln(a) = aˣ·ln(a)

**自然对数 f(x) = ln(x) 的导数推导：**
1. 设 y = ln(x)，则 eʸ = x
2. 对两边求导：eʸ·dy/dx = 1
3. 所以 dy/dx = 1/eʸ = 1/x
4. 因此 f'(x) = 1/x

**常用对数 f(x) = logₐ(x) 的导数推导：**
1. logₐ(x) = ln(x) / ln(a)
2. 使用常数倍法则：f'(x) = (1/x) / ln(a) = 1/(x·ln(a))

#### 3.3 三角函数

**正弦函数 f(x) = sin(x) 的导数推导：**
1. f(x+h) = sin(x+h) = sin(x)cos(h) + cos(x)sin(h)
2. f(x) = sin(x)
3. f(x+h) - f(x) = sin(x)cos(h) + cos(x)sin(h) - sin(x)
4. = sin(x)(cos(h) - 1) + cos(x)sin(h)
5. 当h→0时，cos(h) ≈ 1 - h²/2，sin(h) ≈ h
6. 所以 [f(x+h) - f(x)] / h ≈ [sin(x)(-h²/2) + cos(x)h] / h
7. ≈ cos(x) (当h→0时，h²/2项趋近于0)
8. 因此 f'(x) = cos(x)

**余弦函数 f(x) = cos(x) 的导数推导：**
1. f(x+h) = cos(x+h) = cos(x)cos(h) - sin(x)sin(h)
2. f(x) = cos(x)
3. f(x+h) - f(x) = cos(x)cos(h) - sin(x)sin(h) - cos(x)
4. = cos(x)(cos(h) - 1) - sin(x)sin(h)
5. 当h→0时，cos(h) ≈ 1 - h²/2，sin(h) ≈ h
6. 所以 [f(x+h) - f(x)] / h ≈ [cos(x)(-h²/2) - sin(x)h] / h
7. ≈ -sin(x) (当h→0时，h²/2项趋近于0)
8. 因此 f'(x) = -sin(x)

**正切函数 f(x) = tan(x) 的导数推导：**
1. tan(x) = sin(x) / cos(x)
2. 使用商法则：f'(x) = [cos(x)·cos(x) - sin(x)·(-sin(x))] / cos²(x)
3. = [cos²(x) + sin²(x)] / cos²(x) = 1 / cos²(x) = sec²(x)

**其他三角函数的导数：**
- cot(x) = cos(x)/sin(x) → 使用商法则
- sec(x) = 1/cos(x) → 使用链式法则
- csc(x) = 1/sin(x) → 使用链式法则

#### 3.4 反三角函数
**反正弦：** f(x) = arcsin(x) → f'(x) = 1/√(1-x²)
**反余弦：** f(x) = arccos(x) → f'(x) = -1/√(1-x²)
**反正切：** f(x) = arctan(x) → f'(x) = 1/(1+x²)
**反余切：** f(x) = arccot(x) → f'(x) = -1/(1+x²)

#### 3.5 双曲函数
**双曲正弦：** f(x) = sinh(x) → f'(x) = cosh(x)
**双曲余弦：** f(x) = cosh(x) → f'(x) = sinh(x)
**双曲正切：** f(x) = tanh(x) → f'(x) = sech²(x) = 1/cosh²(x)

#### 3.6 其他重要函数
**绝对值：** f(x) = |x| → f'(x) = x/|x| (x≠0)
**平方根：** f(x) = √x → f'(x) = 1/(2√x)
**倒数：** f(x) = 1/x → f'(x) = -1/x²

#### 3.7 神经网络常用函数

**Sigmoid函数 f(x) = 1/(1+e⁻ˣ) 的导数推导：**
1. f(x) = 1/(1+e⁻ˣ) = (1+e⁻ˣ)⁻¹
2. 使用链式法则：f'(x) = -1·(1+e⁻ˣ)⁻² · (-e⁻ˣ)
3. = e⁻ˣ / (1+e⁻ˣ)²
4. = [e⁻ˣ / (1+e⁻ˣ)] · [1 / (1+e⁻ˣ)]
5. = [1 - 1/(1+e⁻ˣ)] · [1/(1+e⁻ˣ)]
6. = (1 - f(x)) · f(x)
7. 因此 f'(x) = f(x)·(1-f(x))

**Tanh函数 f(x) = tanh(x) 的导数推导：**
1. tanh(x) = (eˣ - e⁻ˣ) / (eˣ + e⁻ˣ)
2. 使用商法则：f'(x) = [(eˣ + e⁻ˣ)(eˣ + e⁻ˣ) - (eˣ - e⁻ˣ)(eˣ - e⁻ˣ)] / (eˣ + e⁻ˣ)²
3. = [(e²ˣ + 2 + e⁻²ˣ) - (e²ˣ - 2 + e⁻²ˣ)] / (eˣ + e⁻ˣ)²
4. = 4 / (eˣ + e⁻ˣ)² = 1 / cosh²(x) = sech²(x)
5. 也可以写成：f'(x) = 1 - tanh²(x)

**ReLU函数 f(x) = max(0,x) 的导数：**
- 当x > 0时：f(x) = x，所以f'(x) = 1
- 当x ≤ 0时：f(x) = 0，所以f'(x) = 0
- 在x = 0处不可导（左导数和右导数不相等）

**Leaky ReLU函数 f(x) = max(0.01x,x) 的导数：**
- 当x > 0时：f(x) = x，所以f'(x) = 1
- 当x ≤ 0时：f(x) = 0.01x，所以f'(x) = 0.01

**Softmax函数的导数：**
- 对于单个输出：∂f(xᵢ)/∂xᵢ = f(xᵢ)·(1-f(xᵢ))
- 对于交叉输出：∂f(xᵢ)/∂xⱼ = -f(xᵢ)·f(xⱼ) (i≠j)

**练习：**
1. f(x) = 5x + 3，求f'(x)    
2. g(x) = x² + 2x + 1，求g'(x)        
3. h(x) = eˣ + sin(x)，求h'(x)        e
4. k(x) = ln(x) + cos(x)，求k'(x)
5. m(x) = x³ + 2ˣ，求m'(x)

**答案：**
1. f'(x) = 5
2. g'(x) = 2x + 2
3. h'(x) = eˣ + cos(x)
4. k'(x) = 1/x - sin(x)
5. m'(x) = 3x² + 2ˣ·ln(2)

### 3.8 求导法则

#### 基本法则
**常数倍法则：** [cf(x)]' = c·f'(x)
**加法法则：** [f(x) + g(x)]' = f'(x) + g'(x)
**减法法则：** [f(x) - g(x)]' = f'(x) - g'(x)

#### 乘法法则
**乘积法则推导：** [f(x)·g(x)]' = f'(x)·g(x) + f(x)·g'(x)

**推导过程：**
1. 设 h(x) = f(x)·g(x)
2. h(x+h) = f(x+h)·g(x+h)
3. h(x+h) - h(x) = f(x+h)·g(x+h) - f(x)·g(x)
4. = f(x+h)·g(x+h) - f(x+h)·g(x) + f(x+h)·g(x) - f(x)·g(x)
5. = f(x+h)[g(x+h) - g(x)] + g(x)[f(x+h) - f(x)]
6. [h(x+h) - h(x)] / h = f(x+h)·[g(x+h) - g(x)] / h + g(x)·[f(x+h) - f(x)] / h
7. 当h→0时，f(x+h) → f(x)
8. 所以 h'(x) = f(x)·g'(x) + g(x)·f'(x)

#### 除法法则
**商法则推导：** [f(x)/g(x)]' = [f'(x)·g(x) - f(x)·g'(x)] / [g(x)]²

**推导过程：**
1. 设 h(x) = f(x)/g(x)
2. 则 f(x) = h(x)·g(x)
3. 使用乘积法则：f'(x) = h'(x)·g(x) + h(x)·g'(x)
4. 解出 h'(x)：h'(x) = [f'(x) - h(x)·g'(x)] / g(x)
5. = [f'(x) - (f(x)/g(x))·g'(x)] / g(x)
6. = [f'(x)·g(x) - f(x)·g'(x)] / [g(x)]²

#### 复合函数法则（链式法则）
**链式法则推导：** [f(g(x))]' = f'(g(x))·g'(x)

**推导过程：**
1. 设 h(x) = f(g(x))
2. h(x+h) = f(g(x+h))
3. 当h很小时，g(x+h) ≈ g(x) + g'(x)·h
4. 所以 h(x+h) ≈ f(g(x) + g'(x)·h)
5. ≈ f(g(x)) + f'(g(x))·g'(x)·h
6. 因此 h(x+h) - h(x) ≈ f'(g(x))·g'(x)·h
7. [h(x+h) - h(x)] / h ≈ f'(g(x))·g'(x)
8. 当h→0时，h'(x) = f'(g(x))·g'(x)

**练习：**
1. f(x) = x·sin(x)，求f'(x)
2. g(x) = eˣ/x，求g'(x)
3. h(x) = sin(x²)，求h'(x)
4. k(x) = ln(sin(x))，求k'(x)
5. m(x) = (x² + 1)·eˣ，求m'(x)

**答案：**
1. f'(x) = sin(x) + x·cos(x)
2. g'(x) = (eˣ·x - eˣ)/x² = eˣ(x-1)/x²
3. h'(x) = cos(x²)·2x = 2x·cos(x²)
4. k'(x) = cos(x)/sin(x) = cot(x)
5. m'(x) = 2x·eˣ + (x²+1)·eˣ = eˣ(x²+2x+1)

### 3.9 推导练习

**练习1：推导幂函数 f(x) = xⁿ 的导数**
1. 使用二项式定理：(x+h)ⁿ = xⁿ + nxⁿ⁻¹h + n(n-1)/2!·xⁿ⁻²h² + ...
2. f(x+h) - f(x) = (x+h)ⁿ - xⁿ = nxⁿ⁻¹h + 高阶项
3. [f(x+h) - f(x)] / h = nxⁿ⁻¹ + 高阶项
4. 当h→0时，高阶项趋近于0
5. 所以 f'(x) = nxⁿ⁻¹

**练习2：推导平方根函数 f(x) = √x 的导数**
1. f(x) = x¹/²
2. 使用幂函数导数：f'(x) = (1/2)x⁻¹/²
3. = 1/(2√x)

**练习3：推导倒数函数 f(x) = 1/x 的导数**
1. f(x) = x⁻¹
2. 使用幂函数导数：f'(x) = -1·x⁻²
3. = -1/x²

**练习4：使用链式法则推导复合函数**
1. f(x) = sin(x²)
2. 设 g(x) = x²，h(x) = sin(x)
3. 则 f(x) = h(g(x))
4. 使用链式法则：f'(x) = h'(g(x))·g'(x)
5. = cos(x²)·2x

### 3.10 实际应用举例

#### 神经网络中的应用
**梯度下降：** 使用导数找到函数的最小值
- 损失函数：L(w) = (y - ŷ)²
- 梯度：∇L = ∂L/∂w = -2(y - ŷ)·∂ŷ/∂w

**激活函数：** 在神经网络中引入非线性
- Sigmoid：将任意输入压缩到(0,1)
- ReLU：解决梯度消失问题
- Tanh：输出范围(-1,1)

#### 物理中的应用
**运动学：**
- 位置函数：s(t) = ½at² + v₀t + s₀
- 速度：v(t) = s'(t) = at + v₀
- 加速度：a(t) = v'(t) = a

**经济学：**
- 成本函数：C(q) = 总成本
- 边际成本：C'(q) = 增加一单位产量的成本

### 4. 导数的几何意义

**切线斜率：** 导数等于函数图像在该点的切线斜率。

**例子：** 在f(x) = x²的图像上，点(2,4)处的切线斜率
- f'(x) = 2x
- f'(2) = 2×2 = 4
- 所以切线斜率是4

**练习：**
1. f(x) = x²在点(1,1)处的切线斜率是多少？
2. f(x) = 2x + 1在任意点的切线斜率是多少？

**答案：**
1. f'(1) = 2×1 = 2
2. f'(x) = 2，所以任意点都是2

### 5. 综合练习

**练习1：**
1. 求f(x) = 3x² + 2x + 1的导数
2. 在x = 2处，f(x)的值和导数各是多少？

**练习2：**
1. 画出f(x) = x + 2的图像
2. 画出f(x) = x²的图像

**练习3：**
1. 一辆车在2小时内行驶了120公里，平均速度是多少？
2. 温度从20°C上升到25°C用了1小时，温度变化率是多少？

---

## 下一部分预告

第二部分将学习：
- 矩阵与向量基础
- 概率与统计基础
- 链式法则与复合函数

**学习建议：**
1. 理解概念的实际意义
2. 多做练习题
3. 把数学与生活联系起来 